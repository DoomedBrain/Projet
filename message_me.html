<!DOCTYPE html>
<html lang="en">
  <head>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="/index.html" />
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/nav.css" />
    <link rel="stylesheet" href="/css/footer.css" />
    <link rel="stylesheet" href="/css/bio.css" />
    <link rel="stylesheet" href="/css/message_me.css" />

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  </head>
  <body>
    <nav>
      <a
        href="/"
        aria-label="Accueil — Julien Millet"
        style="text-decoration: none; color: inherit"
      >
        <div>
          <h1>JULIEN MILLET</h1>
          <h3>COMPOSER | SOUND DESIGNER</h3>
        </div>
      </a>

      <!-- Toggle mobile -->
      <input
        type="checkbox"
        id="nav-toggle"
        class="nav-toggle"
        aria-hidden="true"
      />
      <label
        for="nav-toggle"
        class="nav-burger"
        aria-label="Ouvrir/fermer le menu"
      >
        <span></span><span></span><span></span>
      </label>

      <ul>
        <li><a href="/index.html">PROJECTS</a></li>
        <li class="trait" aria-hidden="true"></li>
        <li><a href="/bio.html">BIO</a></li>
        <li class="trait" aria-hidden="true"></li>
        <li><a href="/message_me.html">MESSAGE ME</a></li>
      </ul>
    </nav>

    <h2>MESSAGE ME!</h2>
    <div class="box">
      <form id="contact-form">
        <input type="email" id="email" placeholder="Votre email" required />
        <input
          type="email"
          id="confirm-email"
          placeholder="Confirmez votre email"
          required
        />
        <textarea
          id="message"
          rows="5"
          placeholder="Votre message"
          required
        ></textarea>
        <button type="submit">Envoyer</button>
      </form>
    </div>

    <footer class="site-footer">
      <div class="footer-inner">
        <div class="footer-left">
          <span>© Julien Millet 2025 — Paris, France</span>
        </div>
        <div class="footer-right">
          <a href="/message_me.html" class="footer-cta">Message me</a>
          <div class="footer-links">
            <a
              href="https://www.instagram.com/millet.julien/"
              target="_blank"
              rel="noopener"
              aria-label="Instagram"
            >
              <img
                src="/public/insta-logo.webp"
                alt="Instagram"
                class="insta-logo"
              />
            </a>
          </div>
        </div>
      </div>
    </footer>
    <script>
      emailjs.init("gm1bLOpZtfvgKjRk-");

      document
        .getElementById("contact-form")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          const email = document.getElementById("email").value.trim();
          const confirmEmail = document
            .getElementById("confirm-email")
            .value.trim();
          const message = document.getElementById("message").value.trim();

          if (!email.includes("@")) {
            alert("Veuillez entrer une adresse email valide (il manque le @).");
            return;
          }

          if (email !== confirmEmail) {
            alert("Les deux adresses email ne correspondent pas.");
            return;
          }

          const params = { email, message };

          emailjs.send("service_z140uhj", "template_eepkiyt", params).then(
            (response) => {
              alert("Message envoyé avec succès !");
              console.log("Réponse EmailJS :", response);
              document.getElementById("contact-form").reset();
            },
            (error) => {
              alert("Erreur lors de l'envoi du message.");
              console.error("Erreur EmailJS :", error);
            }
          );
        });
    </script>
  </body>
</html>
